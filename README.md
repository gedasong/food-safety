# food-safety
This project create a tool to analyze the takeaway food safety condition, using the data extract from elem takeaway platform, and the tool is based on the Python and PyQt5.
外卖食品安全监控
一、	方案摘要
现在很多年轻人的工作节奏越来越快，用餐的节奏也越来越快，平时他们更倾向于通过外卖平台来购买食物，但是这些食物目前监控较为困难，食物来源也无法追踪，所以本文希望通过互联网手段来高效监控外卖食品质量，让居民吃的放心。利用技术手段我们可以获取居民在外卖消费之后的评价数据，通过对这些用户评价数据，可以在一定程度上分析食品的一些细节信息，包括卫生状况、餐后反应、质量安全等，从而算法评估食品的安全系数，达到对外卖食品安全监控的目的。

二、	数据使用
本文使用的是合肥地区饿了么用户的部分评价数据。

三、	技术使用
本文通过python编程，利用异步协程asyncio技术定时获取饿了么用户评价数据，将数据存储在MongoDB数据库中，通过文本挖掘、情感分析（SnownLP等技术）、关键字眼信息（如”卫生”、”监控”、”干净”、”肚子”等）提取等手段对外卖商家进行食品安全系数打分（满分1.0分），并通过matplotlib等绘图工具将分析结果直观地展示出来。

四、	创意成果
外卖食品监控软件（如下图所示）
 
	
五、	价值导向
本方案最终希望能够通过数据手段挖掘有用信息，从而为大众吃到更安全的外卖食品提供一个参考。


六、	附录（Demo使用说明）
1.	Demo名称：外卖食品安全监控
2.	Demo正常运行需要基于MongoDB数据库，但为了测试方便也增加了CSV文件测试功能。基于CSV文件测试见步骤（4-12），基于MongDB数据库测试方式见步骤（13）。
3.	解压”外卖食品安全监控.rar”文件(最好解压到D盘根目录下)，双击根目录下的”外卖食品安全.exe”文件（如异常，请到“safe\dist\Main”目录下点击Main.exe）；
 
图1 Demo文件
4.弹出下图所示界面，点击‘数据分析’Tab页，点选红框处所示的”使用CSV文件测试”；
 
图2 使用CSV文件测试
5．点击数据显示按钮，在左侧Data页面下会出现相应的数据信息
 ；
图3 数据显示（1）
 
图4 数据显示（2）
6.点击”评论显示”按钮，会在Report页面出现相应的用户消费评论信息；
 
图5 评论显示（1）
	 
图6 评论显示（2）
7.点击“云词显示”按钮，出现用户评论的云词图；
 
图7 云词显示（1）
 
图8 云词显示（2）
8.点击“外卖安全分析”按钮，进行文本数据分析，在Figure页面下显示各个店家的食品安全得分统计图；
 
图9 外卖安全分析（1）
 
图10 外卖安全分析（2）
9. 点击“得分情况”按钮，会在左侧Data页面下显示各个店家的具体得分数据；
 
图11 得分情况（1）
 
图12 得分情况（2）
10.点击“Top20”按钮，会显示安全得分排在前20的店家；
 
图13 Top20显示（1）
 
图14 Top20显示（2）
10.点击“Bottom20”按钮，会显示安全得分排在后20的店家，具体界面通“Top20”类似；
11.步骤9和步骤10操作之后，在下图红框位置会出现相应的店家信息，我们可以选择单个店家并查看相应评论及云词，可以看到图16中得分较低的一家店的具体评论细节，的确存在一些安全质量隐患；
 
图15 Top20和Bottom20的店家信息（1）
 
图16 安全得分较差的一家店具体评论
	12.点击绘图设置Tab按钮，可以进行云词绘图设置；
 
图17 云词绘图设置
	13 取消点选“使用CSV文件”测试，可以进行基于数据库的测试，但前提是要安装MongoDB数据库，否则无法测试（安装教程：http://www.runoob.com/mongodb/mongodb-window-install.html），安装并配置好后，点击 “数据获取并存储”，可以自动获取外卖信息并存储到数据库中，用于后续分析，其他步骤（5-12）

 
图18 数据获取并存储
 
图19 MongoDB数据库

 
图20 数据库存储信息
